# 開発ロードマップ

政府会議ウォッチャーの開発計画

最終更新: 2025-11-13

---

## 🎯 ビジョン

政府会議の情報を民主化し、政策決定プロセスの透明性を高める

---

## 🏗️ システムアーキテクチャ

### コンポーネント構成

```
┌─────────────────────────────────────┐
│         Google Apps Script          │
│   - メール配信                        │
│   - スケジュール実行                   │
│   - 会議情報の解析                    │
└──────────┬──────────────────────────┘
           │ HTTPS
           ↓
┌─────────────────────────────────────┐
│  Nginx (fetch.klammer.co.jp)        │
│   - リバースプロキシ                  │
│   - SSL終端                          │
│   - Basic認証（将来）                 │
└──────────┬──────────────────────────┘
           │
     ┌─────┴─────┐
     ↓           ↓
┌─────────┐  ┌─────────┐
│fetcher  │  │  asr    │
│:3000    │  │  :8080  │
│Node.js  │  │ Python  │
│PM2      │  │ Docker  │
└─────────┘  └─────────┘
  ↓              ↓
Webページ    YouTube字幕
取得          PDF OCR
```

### 各コンポーネントの役割

1. **GAS (Google Apps Script)**
   - 監視対象会議の管理
   - HTMLの解析とメタデータ抽出
   - Gemini APIによる要約生成
   - メール配信

2. **fetcher (Node.js + Express)**
   - Webページの取得（User-Agent偽装）
   - Cookie管理
   - キャッシュ機能（600秒）
   - エンドポイント: `/fetcher/crawl`

3. **asr (Python + FastAPI)**
   - YouTube字幕取得（yt-dlp）
   - PDF OCR（PyMuPDF）
   - Whisper音声文字起こし
   - エンドポイント: `/ocr`, `/transcript`

4. **Nginx**
   - リバースプロキシ
   - SSL/TLS終端
   - 将来: Basic認証、レート制限

---

## 📊 現在の状況（2025年11月13日）

### 実装済み機能
- ✅ 14会議の自動監視（経産省8 + 金融庁6）
- ✅ PDF OCR、YouTube字幕取得
- ✅ Gemini 2.5 Flashによる要約
- ✅ メール配信システム
- ✅ セキュリティ監視（fail2ban）
- ✅ VPS復旧手順の確立

### システム状態
- **監視会議数**: 14会議
- **購読者数**: 初期ユーザー（1名）
- **稼働状況**: α版稼働中
- **VPS**: Ubuntu 24.04, 162.43.20.177

### 最近の対応
- 2025-11-13: サイバー攻撃からの復旧完了
- 2025-11-13: Nginx設定ミス修正（port 8000→3000）
- 2025-11-12: 監視会議数を8→14に拡大

---

## 🚀 Phase 1: UX改善とスケーラビリティ（2-3週間）

### 目標
基本機能の洗練と、100会議監視に向けた基盤整備

### タスク

#### 1-1. 運用安定化 ⚠️ 優先
- [x] VPS復旧手順のドキュメント化
- [ ] 自動バックアップの設定
- [ ] 監視アラートの最適化
- [ ] セキュリティ強化
  - [ ] Basic認証の再有効化
  - [ ] fail2ban設定の見直し
  - [ ] 定期的なセキュリティ更新

#### 1-2. メール配信の改善
- [ ] 購読中の会議リストをメールフッターに表示
- [ ] 配信設定変更リンクの明示
- [ ] メールテンプレートの最適化
- [ ] エラーメールの改善

#### 1-3. 会議一覧ページの強化
- [ ] 全監視対象会議の一覧ページ作成
- [ ] 省庁・分野別のカテゴリ表示
- [ ] 「3会議以上は有料プラン」のCTA追加

#### 1-4. 監視会議の拡大
- [x] 14会議まで拡大（経産省8 + 金融庁6）
- [ ] 20会議まで拡大（経産省中心）
- [ ] 動作確認・安定性テスト
- [ ] エラー処理の強化

#### 1-5. スケーラビリティ対応
- [ ] グループ分割処理の実装
- [ ] 50会議対応（2グループ）
- [ ] 100会議対応（5グループ）
- [ ] キャッシュ戦略の最適化

#### 1-6. 管理者機能
- [x] dailyCheckAllの実行レポート送信
- [ ] セキュリティダッシュボードの定期確認
- [ ] 異常検知アラートの最適化
- [ ] ログ集約・分析

### 成果物
- 改善されたメール配信システム
- 100会議対応のスケーラブルな処理基盤
- 強化された監視・アラート機能
- 運用マニュアル

---

## 💰 Phase 2: 課金基盤の構築（1ヶ月）

### 目標
持続可能なビジネスモデルの確立

### タスク

#### 2-1. 料金プラン設計
- [ ] プラン詳細の確定
  - 無料: 2会議まで
  - ベーシック: ¥980/月（10会議まで）
  - プレミアム: ¥2,980/月（無制限+α）
- [ ] 利用規約の作成
- [ ] プライバシーポリシーの作成

#### 2-2. Stripe統合
- [ ] Stripeアカウント作成
- [ ] Checkout統合
- [ ] Webhookの実装
- [ ] サブスクリプション管理

#### 2-3. データベース設計
- [ ] ユーザー管理テーブル
- [ ] サブスクリプション状態管理
- [ ] 課金履歴の記録
- [ ] Google Sheets vs 専用DB検討

#### 2-4. 課金フロー実装
- [ ] 会員登録ページ
- [ ] 決済ページ
- [ ] プラン変更機能
- [ ] 解約機能

#### 2-5. ユーザー管理機能
- [ ] ログイン/ログアウト
- [ ] パスワード管理
- [ ] マイページ
- [ ] 購読会議の選択UI

### 成果物
- 完全な課金システム
- ユーザー管理システム
- 法的文書（利用規約・PP）

---

## 🎨 Phase 3: プレミアム機能の開発（2ヶ月）

### 目標
プレミアムプランの価値を高める独自機能の提供

### タスク

#### 3-1. キーワードアラート機能
- [ ] キーワード設定UI
- [ ] 字幕・議事録からのキーワード検索
- [ ] Geminiによる発言者・文脈抽出
- [ ] キーワードアラートメール配信
- [ ] 複数キーワードの論理演算（AND/OR）

**実装例**:
```
キーワード: 「カジノ」「IR」「統合型リゾート」

検出時のメール:
━━━━━━━━━━━━━━━━━━
🔍 キーワードアラート

【会議】国土交通省 観光立国推進基本計画検討会
【検出】カジノ（3箇所）

○○委員:
「統合型リゾート（IR）におけるカジノ施設については...」

△△審議官:
「カジノを含むIR施設の経済効果について...」

━━━━━━━━━━━━━━━━━━
```

#### 3-2. カスタム配信フォーマット
- [ ] フォーマットテンプレート設計
  - コンサルファーム向け
  - 企業政策担当向け
  - アカデミック向け
- [ ] フォーマット選択UI
- [ ] テンプレートエンジンの実装
- [ ] カスタムフィールドの追加

#### 3-3. 高度な分析機能（検討中）
- [ ] トピックトレンド分析
- [ ] 委員発言の傾向分析
- [ ] 関連会議の推薦

### 成果物
- キーワードアラート機能（プレミアム）
- カスタム配信機能（プレミアム）
- 差別化された付加価値

---

## 🌐 Phase 4: β版リリースと成長（3ヶ月〜）

### 目標
β版ユーザー獲得と継続的改善

### タスク

#### 4-1. ランディングページ
- [ ] LP作成（デザイン・コピーライティング）
- [ ] 価値提案の明確化
- [ ] 導入事例の作成

#### 4-2. マーケティング
- [ ] ターゲット顧客の明確化
  - コンサルティングファーム
  - 企業の政策担当部門
  - 研究者・ジャーナリスト
- [ ] SNS運用（X/LinkedIn）
- [ ] コンテンツマーケティング
- [ ] 初期ユーザーの獲得（50-100名）

#### 4-3. ユーザーテスト
- [ ] β版ユーザー募集
- [ ] フィードバック収集
- [ ] 改善サイクルの確立
- [ ] NPS測定

#### 4-4. 監視会議の大幅拡大
- [ ] 50会議まで拡大
  - 経済産業省（全分野）
  - 環境省
  - 国土交通省
- [ ] 100会議まで拡大
  - 全省庁対応
  - 自治体会議（検討）

#### 4-5. セキュリティ強化
- [ ] セキュリティ監査
- [ ] ペネトレーションテスト
- [ ] GDPR/個人情報保護法の完全対応

### 成果物
- β版サービス
- 初期ユーザーベース
- 継続的改善の仕組み

---

## 📈 Phase 5: 正式版リリースと事業拡大（6ヶ月〜）

### 目標
持続可能な事業モデルの確立

### タスク

#### 5-1. 正式版リリース
- [ ] β版からのフィードバック反映
- [ ] パフォーマンス最適化
- [ ] ドキュメント整備

#### 5-2. エンタープライズ対応
- [ ] 企業向けプラン
- [ ] API提供
- [ ] SLA保証
- [ ] 専任サポート

#### 5-3. 機能拡張
- [ ] モバイルアプリ（検討）
- [ ] Slack/Teams連携
- [ ] API公開
- [ ] ダッシュボード機能

#### 5-4. 国際展開（検討）
- [ ] 英語版
- [ ] 他国政府会議への対応

### 成果物
- 正式版サービス
- エンタープライズ顧客
- 持続的な収益

---

## 📊 KPI

### Phase 1（現在）
- 監視会議数: 14 → 20
- 稼働率: 99%以上
- エラー率: 5%以下
- 復旧時間: 4時間以内

### Phase 2（1ヶ月後）
- 有料ユーザー: 10名
- MRR: ¥10,000
- 監視会議数: 20

### Phase 3（3ヶ月後）
- 監視会議数: 50
- 有料ユーザー: 50名
- MRR: ¥50,000

### Phase 4（6ヶ月後）
- 監視会議数: 100
- 総ユーザー: 500名
- 有料ユーザー: 100名
- MRR: ¥100,000

### Phase 5（1年後）
- 総ユーザー: 2,000名
- 有料ユーザー: 300名
- MRR: ¥300,000
- ARR: ¥3,600,000

---

## 🔧 技術スタック

### フロントエンド
- Google Apps Script
- HTML/CSS/JavaScript（Webアプリ）

### バックエンド
- **GAS**: メインロジック、スケジューラ
- **Node.js (fetcher)**: Webスクレイピング
- **Python (asr)**: OCR、音声文字起こし

### AI/ML
- Gemini 2.5 Flash: 要約生成
- yt-dlp: YouTube字幕取得
- PyMuPDF: PDF処理
- Whisper (distil-large-v3): 音声認識

### インフラ
- **VPS**: Ubuntu 24.04
- **Nginx**: リバースプロキシ、SSL
- **PM2**: Node.jsプロセス管理
- **Docker**: Pythonコンテナ

### セキュリティ
- fail2ban: 攻撃検知・ブロック
- Let's Encrypt: SSL証明書
- Basic認証（計画中）

---

## 🔄 継続的改善

### 日次タスク
- システム稼働状況確認
- エラーログ確認
- セキュリティアラート確認

### 週次レビュー
- KPI確認
- ユーザーフィードバック確認
- インシデント振り返り

### 月次レビュー
- KPI達成状況
- ロードマップの見直し
- 優先順位の調整
- コスト分析

### 四半期レビュー
- 大きな方向性の確認
- 新機能の検討
- 競合分析

---

## 💡 アイデアバックログ

将来的に検討する機能:

### 高優先度
- [ ] 監視システムの冗長化（別VPS）
- [ ] 自動バックアップ・リストア
- [ ] CI/CDパイプライン

### 中優先度
- [ ] AI要約の品質向上（GPT-4、Claude等の併用）
- [ ] 会議の重要度スコアリング
- [ ] 委員ネットワーク分析
- [ ] 議事録の自動生成

### 低優先度
- [ ] 政策予測機能
- [ ] 音声文字起こし（議事録未公開の会議対応）
- [ ] 自治体会議への対応
- [ ] 海外政府会議への対応

---

## 🚨 運用リスクと対策

### リスク1: VPS障害
- **対策**: 定期バックアップ、復旧手順の整備
- **RTO**: 4時間
- **RPO**: 1日

### リスク2: サイバー攻撃
- **対策**: fail2ban、セキュリティ更新、監視
- **現状**: 2025-11-13に攻撃を受けて復旧完了

### リスク3: API制限
- **対策**: レート制限、エラーハンドリング、リトライ
- **監視**: Gemini API使用量

### リスク4: コスト増大
- **対策**: 月次コスト確認、最適化
- **現状**: VPS ¥1,000/月程度

---

## 📝 変更履歴

- 2025-11-13: システムアーキテクチャ追加、実績反映、運用リスク追加
- 2025-11-12: 初版作成
